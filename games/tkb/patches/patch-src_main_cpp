$OpenBSD$
--- src/main.cpp.orig	Wed Mar  2 22:28:04 2011
+++ src/main.cpp	Thu May  5 16:47:08 2011
@@ -1,6 +1,8 @@
 #include "CGameApp.h"
 #include "CSplash.h"
 
+#include "common/files.h"
+
 int abnormal_exit=1;
 
 void ExitHandler()
@@ -15,6 +17,7 @@ void ExitHandler()
 }
 
 /* chdir to TK directory */
+/*
 void ChAppDir(const char *argv0)
 {	char *str;
 	int a;
@@ -38,9 +41,10 @@ void ChAppDir(const char *argv0)
 
 	free(str);
 }
+*/
 
 // TODO: CONFIGFILE
-const char* KIconFile="tk.ico";
+const char* KIconFile=getdatapath(std::string("tk.ico")).c_str();
 const char* KWindowCaption="Tapan Kaikki Bloodshed";
 
 int main(int argc,char *argv[]) 
@@ -48,6 +52,7 @@ int main(int argc,char *argv[]) 
 	CGameApp* GGameApp = NULL;
 	atexit(ExitHandler);
 	//ChAppDir(argv[0]);
+	chdir(getdatapath(".").c_str());
 
 	try
 	{
